#include <NewPing.h>
#define sol1 11
#define sol2 8
#define sag1 7
#define sag2 4

int sagsen,onsen,solsen;
int buzzer = 9;
NewPing r(5,3,200);   /*sağ sensor tanıtımı */
NewPing l(10,9,200);  /*sol sensor tanıtımı */
NewPing o(13,12,200);  /*ön sensor tanıtımı */
void buzzer_ses(){
  analogWrite(buzzer,30);
  delay(50);
  analogWrite(buzzer,0);
  delay(10);
}
void setup() {
  Serial.begin(9600);
  pinMode(buzzer,OUTPUT);
  pinMode(11,OUTPUT); /*motor sürücü pinleri çıkış olarak ayarlandı*/
  pinMode(8,OUTPUT);
  pinMode(7,OUTPUT);
  pinMode(4,OUTPUT);
  digitalWrite(sol1,LOW);
  digitalWrite(sol2,LOW);
  digitalWrite(sag1,LOW); 
  digitalWrite(sag2,LOW);
  delay(3000); /*harekete geçmek için 3 saniye bekle*/   
}
void loop()
{
  analogWrite(6,157);
  sagsen=r.ping_cm();  /*sag ultrasonik sensorden gelen verinin cm e cevrilmesi ve değişkene aktarımı*/
  solsen=l.ping_cm();  /*sol ultrasonik sensorden gelen verinin cm e cevrilmesi ve değişkene aktarımı*/
  onsen=o.ping_cm();  /*ön ultrasonik sensorden gelen verinin cm e cevrilmesi ve değişkene aktarımı*/
  Serial.print(sagsen);
  Serial.print("sag\t");
  Serial.print(solsen);
  Serial.print("sol\t");
  Serial.print(onsen);
  Serial.print("on\t");
  delay(100);
  Serial.println();
    if(onsen<15){ // Önünde, sağında ve solunda engel var
    if (sagsen<15){
        if(solsen<15){
          buzzer_ses();
        geri();
        delay(250);
        sagd();
        delay(580);
        duz();
        delay(200);
        Serial.println("geri ve sag keskin");
       }
     }
   }
   if(onsen<15){ // Önünde ve solunda engel var
    if (sagsen>15){
       if(solsen<15){
        buzzer_ses();
       sag();
        delay(500);
        duz();
        delay(200);
        Serial.println("sag");
       }
     }
   }
    if(onsen>15){ // Sağında ve solunda engel var
    if (sagsen<15){
     if(solsen<15){
      buzzer_ses();
        duz();
        delay(200);
        Serial.println("duz");
       }
     }
  }
    if(onsen>15){  // Sadece solunda engel var
    if (sagsen>15){
   if(solsen<15){
    buzzer_ses();
        sag();
        delay(450);
        Serial.println("saga");
        }
     }
   }
     if(onsen<15){ // Önünde ve sağında engel var
    if (sagsen<15){
      if(solsen>15){
        buzzer_ses();
        sol();
        delay(580);
        Serial.println("sol");
       }
      }
     }
    if(onsen<15){  // Sadece önünde engel var
    if (sagsen>15){
      if(solsen>15){
        buzzer_ses();
        geri();
       delay(300);
        sagd();
        delay(580);
        Serial.println("sağ keskin");
        }
      }
     }
  if(onsen>15){  // Sadece sağında engel var
    if (sagsen<15){
      
      if(solsen>15){
        buzzer_ses();
        sol();
        delay(500);
        Serial.println("sola");
        
        }
      }
   }

  if(onsen>15){   // Önünda, sağında ve solunda engel yok
    if (sagsen>15){
      
      if(solsen>15){
        
        duz();
        delay(200);
        Serial.println("duz");
          }
      }
   }
}
void duz()
{
  digitalWrite(sol1,HIGH);
  digitalWrite(sol2,LOW);
  digitalWrite(sag1,HIGH);
  digitalWrite(sag2,LOW);
  }
void sag()
{
  digitalWrite(sol1,HIGH);
  digitalWrite(sol2,LOW);
  digitalWrite(sag1,LOW);
  digitalWrite(sag2,LOW);
  }
void sol()
{
  digitalWrite(sol1,LOW);
  digitalWrite(sol2,LOW);
  digitalWrite(sag1,HIGH);
  digitalWrite(sag2,LOW);
  }
  void dur()
  {
    digitalWrite(sol1,LOW);
  digitalWrite(sol2,LOW);
  digitalWrite(sag1,LOW);
  digitalWrite(sag2,LOW);
  }
  void sagd()
  {
    digitalWrite(sol1,HIGH);
  digitalWrite(sol2,LOW);
  digitalWrite(sag1,LOW);
  digitalWrite(sag2,HIGH);
  }
 void sold()
  {
   digitalWrite(sol1,LOW);
  digitalWrite(sol2,HIGH);
  digitalWrite(sag1,HIGH);
  digitalWrite(sag2,LOW);
 }   
 void geri()
 {
   digitalWrite(sol1,LOW);
  digitalWrite(sol2,HIGH);
  digitalWrite(sag1,LOW);
  digitalWrite(sag2,HIGH);
 }
 
